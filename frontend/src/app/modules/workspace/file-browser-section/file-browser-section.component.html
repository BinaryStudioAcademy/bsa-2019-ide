<div class="tree-wrapper">
    <p-progressBar *ngIf="!files || files.length == 0" mode="indeterminate" [style]="{'height': '6px'}"></p-progressBar>
    <button *ngIf="!showSearchField" pButton type="button" icon="pi pi-sort" title="Expand all" iconPos="left"
        class="ui-button-primary expand-btn" (click)="expand()"></button>
    <p-tree *ngIf="files && files.length > 0 && !showSearchField" class="custom-tree" selectionMode="single" [value]="files" [(selection)]="selectedItem"  [contextMenu]="contextMenu"
        (onNodeSelect)="nodeSelect($event)" (onNodeContextMenuSelect)="nodeContextMenuSelect($event)" [filter]="showSearchField"
        filterMode="strict">
        <ng-template let-node pTemplate="0">
                <input class="input-item" [value]="node.label" (focusout)="focusout(node)" 
                        (keyup.enter)="focusout(node)" (keydown)="inputKeyDown($event)" disabled>
        </ng-template>
        <ng-template let-node  pTemplate="1">
            <input class="input-item" type="text" [ngModel]="node.label" (focusout)="focusout(node)"
                        (input)="setIcon(node)" (keyup.enter)="focusout(node)" (keydown)="inputKeyDown($event)" disabled>
        </ng-template>
    </p-tree>

    <div *ngIf="showSearchField">
        <div class="file-search">
            <input type="text" class="file-search-keyword" placeholder="Keyword" #keywordInput>
            <button pButton class="file-search-submit" type="submit" label="Search" (click)="searchByFiles(keywordInput.value)"></button>
        </div>
        <p-orderList *ngIf="fileSearchResults" [value]="fileSearchResults" (onSelectionChange) = "onFileResultSelected($event)">
            <ng-template let-result pTemplate="item">
                <div class="ui-helper-clearfix">
                    <div>{{result.fileName}}</div>
                </div>
            </ng-template>
        </p-orderList>
    </div>
    <p-contextMenu #contextMenu [model]="items"></p-contextMenu>
</div>