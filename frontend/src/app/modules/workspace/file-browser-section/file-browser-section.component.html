<div class="tree-wrapper">
    <p-progressBar *ngIf="!files || files.length == 0" mode="indeterminate" [style]="{'height': '6px'}"></p-progressBar>
    <button *ngIf="!showSearchField" pButton type="button" icon="pi pi-sort" title="Expand all" iconPos="left"
        class="ui-button-primary expand-btn" (click)="expand()"></button>
    <p-tree *ngIf="files && files.length > 0 && !showSearchField" class="custom-tree" selectionMode="single" [value]="files" [(selection)]="selectedItem"  [contextMenu]="contextMenu"
        (onNodeSelect)="nodeSelect($event)" (onNodeContextMenuSelect)="nodeContextMenuSelect($event)" [filter]="showSearchField"
        filterMode="strict">
        <ng-template let-node pTemplate="0">
                <input class="input-item" [value]="node.label" (focusout)="focusout(node)" 
                        (keyup.enter)="focusout(node)" (keydown)="inputKeyDown($event)" disabled>
        </ng-template>
        <ng-template let-node  pTemplate="1">
            <input class="input-item" type="text" [ngModel]="node.label" (focusout)="focusout(node)"
                        (input)="setIcon(node)" (keyup.enter)="focusout(node)" (keydown)="inputKeyDown($event)" disabled>
        </ng-template>
    </p-tree>
    <div *ngIf="showSearchField" class="ui-g ui-fluid">
        <div class="ui-g-12 ui-md-4">
            <div class="ui-inputgroup">
                <input type="text"  placeholder="Keyword" #keywordInput>
                <button pButton type="submit" label="Search" (click)="searchByFiles(keywordInput.value)"></button>
            </div>
        </div>
    </div>
    <p-contextMenu #contextMenu [model]="items"></p-contextMenu>
</div>